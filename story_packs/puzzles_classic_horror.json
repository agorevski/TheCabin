[
    {
        "id": "lantern_lighting_puzzle",
        "name": "Light the Way",
        "description": "Find a way to light the rusty lantern in the dark cabin.",
        "type": "Sequential",
        "steps": [
            {
                "id": "find_matches",
                "stepNumber": 1,
                "description": "Find matches to light the lantern",
                "action": "take",
                "targetObject": "matches",
                "requiredFlags": [],
                "requiredItems": [],
                "requiredLocation": "",
                "completionFlag": "has_matches",
                "successMessage": "You pick up the box of matches. They rattle slightly - hopefully some are still dry.",
                "failureMessage": "You don't see any matches here.",
                "feedbackMessage": "You need something to create fire."
            },
            {
                "id": "take_lantern",
                "stepNumber": 2,
                "description": "Take the lantern from its hook",
                "action": "take",
                "targetObject": "lantern",
                "requiredFlags": [],
                "requiredItems": [],
                "requiredLocation": "cabin_main",
                "completionFlag": "has_lantern",
                "successMessage": "You carefully lift the lantern off its rusty hook. Oil sloshes inside.",
                "failureMessage": "The lantern is stuck on the hook.",
                "feedbackMessage": "The lantern hangs within reach."
            },
            {
                "id": "light_lantern",
                "stepNumber": 3,
                "description": "Light the lantern using the matches",
                "action": "use",
                "targetObject": "matches",
                "requiredFlags": [
                    "has_matches",
                    "has_lantern"
                ],
                "requiredItems": [
                    "matches",
                    "lantern"
                ],
                "requiredLocation": "",
                "completionFlag": "lantern_lit",
                "successMessage": "You strike a match and touch it to the lantern's wick. Golden light floods the room, revealing details hidden in shadow.",
                "failureMessage": "You need both matches and the lantern.",
                "feedbackMessage": "The match flares to life with a satisfying scratch."
            }
        ],
        "requiredItems": [],
        "completionMessage": "The lantern's warm glow pushes back the darkness. You can now see clearly!",
        "completionAchievementId": "light_bringer",
        "achievementId": "light_bringer",
        "hints": [
            {
                "level": 1,
                "text": "The lantern hangs from a hook on the wall. You'll need something to light it with.",
                "cost": 0,
                "order": 1,
                "delayMinutes": 2
            },
            {
                "level": 2,
                "text": "Search the cabin thoroughly. Matches are often kept near fireplaces or on tables.",
                "cost": 0,
                "order": 2,
                "delayMinutes": 5
            },
            {
                "level": 3,
                "text": "Try: 'take matches', then 'take lantern', then 'use matches'",
                "cost": 1,
                "order": 3,
                "delayMinutes": 10
            }
        ]
    },
    {
        "id": "locked_door_puzzle",
        "name": "The Locked Study",
        "description": "Gain access to the locked study by finding the key.",
        "type": "Combinatorial",
        "steps": [
            {
                "id": "find_key",
                "stepNumber": 1,
                "description": "Locate the rusty key",
                "action": "take",
                "targetObject": "rusty_key",
                "requiredFlags": [],
                "requiredItems": [],
                "requiredLocation": "cabin_loft",
                "completionFlag": "has_study_key",
                "successMessage": "You find a rusty key hidden beneath a loose floorboard.",
                "failureMessage": "You don't see a key here.",
                "feedbackMessage": "The floorboards creak beneath your feet."
            },
            {
                "id": "unlock_door",
                "stepNumber": 2,
                "description": "Use the key to unlock the study door",
                "action": "use",
                "targetObject": "rusty_key",
                "requiredFlags": [
                    "has_study_key"
                ],
                "requiredItems": [
                    "rusty_key"
                ],
                "requiredLocation": "cabin_main",
                "completionFlag": "study_unlocked",
                "successMessage": "The key turns with a grinding screech. The lock clicks open.",
                "failureMessage": "You need the key to unlock this door.",
                "feedbackMessage": "The rusty key fits perfectly in the lock."
            }
        ],
        "requiredItems": [],
        "completionMessage": "The study door swings open with a prolonged creak, revealing a room frozen in time.",
        "completionAchievementId": "secret_seeker",
        "achievementId": "secret_seeker",
        "hints": [
            {
                "level": 1,
                "text": "The study door is locked. You'll need to find a key somewhere in the cabin.",
                "cost": 0,
                "order": 1,
                "delayMinutes": 3
            },
            {
                "level": 2,
                "text": "Try exploring the loft above the main room. Old cabins often have hidden items in the upper floors.",
                "cost": 0,
                "order": 2,
                "delayMinutes": 7
            },
            {
                "level": 3,
                "text": "Look for loose floorboards in the loft. Try 'examine floor' when you're up there.",
                "cost": 1,
                "order": 3,
                "delayMinutes": 12
            }
        ]
    },
    {
        "id": "diary_puzzle",
        "name": "The Diary's Secret",
        "description": "Decipher the cryptic diary entries to reveal the cabin's dark history.",
        "type": "Sequential",
        "steps": [
            {
                "id": "find_diary",
                "stepNumber": 1,
                "description": "Find the old diary",
                "action": "take",
                "targetObject": "diary",
                "requiredFlags": [
                    "study_unlocked"
                ],
                "requiredItems": [],
                "requiredLocation": "study",
                "completionFlag": "has_diary",
                "successMessage": "You pick up the leather-bound diary. Its pages are yellowed with age.",
                "failureMessage": "You need to unlock the study first.",
                "feedbackMessage": "The diary lies on the desk, waiting to reveal its secrets."
            },
            {
                "id": "read_diary",
                "stepNumber": 2,
                "description": "Read the diary carefully",
                "action": "read",
                "targetObject": "diary",
                "requiredFlags": [
                    "has_diary",
                    "lantern_lit"
                ],
                "requiredItems": [
                    "diary"
                ],
                "requiredLocation": "",
                "completionFlag": "diary_read",
                "successMessage": "You read the diary by lantern light. The entries speak of strange occurrences and mounting dread. The final entry mentions a hidden compartment behind the fireplace.",
                "failureMessage": "You need light to read the faded text.",
                "feedbackMessage": "The handwriting is shaky and difficult to decipher."
            },
            {
                "id": "examine_fireplace",
                "stepNumber": 3,
                "description": "Investigate the fireplace",
                "action": "examine",
                "targetObject": "fireplace",
                "requiredFlags": [
                    "diary_read"
                ],
                "requiredItems": [],
                "requiredLocation": "cabin_main",
                "completionFlag": "fireplace_secret_found",
                "successMessage": "You run your hands along the fireplace stones. One brick moves! Behind it, you find a small wooden box.",
                "failureMessage": "Nothing seems unusual about the fireplace.",
                "feedbackMessage": "The cold stones of the fireplace hold their secrets well."
            },
            {
                "id": "open_box",
                "stepNumber": 4,
                "description": "Open the hidden box",
                "action": "open",
                "targetObject": "wooden_box",
                "requiredFlags": [
                    "fireplace_secret_found"
                ],
                "requiredItems": [],
                "requiredLocation": "cabin_main",
                "completionFlag": "box_opened",
                "successMessage": "Inside the box, you find an old photograph and a cryptic note that begins to explain everything...",
                "failureMessage": "You haven't found the hidden box yet.",
                "feedbackMessage": "The box's hinges protest as you lift the lid."
            }
        ],
        "requiredItems": [],
        "completionMessage": "The cabin's dark history is finally revealed. You understand now why this place was abandoned.",
        "completionAchievementId": "truth_seeker",
        "achievementId": "truth_seeker",
        "hints": [
            {
                "level": 1,
                "text": "The study might contain clues about the cabin's past. Have you explored it thoroughly?",
                "cost": 0,
                "order": 1,
                "delayMinutes": 5
            },
            {
                "level": 2,
                "text": "That diary on the desk looks promising. You'll need light to read it properly.",
                "cost": 0,
                "order": 2,
                "delayMinutes": 8
            },
            {
                "level": 3,
                "text": "The diary mentions the fireplace. Try examining it after you've read the diary.",
                "cost": 1,
                "order": 3,
                "delayMinutes": 15
            }
        ]
    }
]